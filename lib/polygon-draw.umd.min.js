(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["polygon-draw"]=e():t["polygon-draw"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"00ee":function(t,e,n){var r=n("b622"),o=r("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},"04f8":function(t,e,n){var r=n("2d00"),o=n("d039"),i=n("da84"),a=i.String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!a(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"06cf":function(t,e,n){var r=n("83ab"),o=n("c65b"),i=n("d1e7"),a=n("5c6c"),c=n("fc6a"),s=n("a04b"),u=n("1a2d"),f=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=c(t),e=s(e),f)try{return l(t,e)}catch(n){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},"07fa":function(t,e,n){var r=n("50c4");t.exports=function(t){return r(t.length)}},"0cfb":function(t,e,n){var r=n("83ab"),o=n("d039"),i=n("cc12");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"0d26":function(t,e,n){var r=n("e330"),o=Error,i=r("".replace),a=function(t){return String(o(t).stack)}("zxcasd"),c=/\n\s*at [^:]*:[^\n]*/,s=c.test(a);t.exports=function(t,e){if(s&&"string"==typeof t&&!o.prepareStackTrace)while(e--)t=i(t,c,"");return t}},"0d51":function(t,e){var n=String;t.exports=function(t){try{return n(t)}catch(e){return"Object"}}},"13d2":function(t,e,n){var r=n("e330"),o=n("d039"),i=n("1626"),a=n("1a2d"),c=n("83ab"),s=n("5e77").CONFIGURABLE,u=n("8925"),f=n("69f3"),l=f.enforce,h=f.get,d=String,p=Object.defineProperty,y=r("".slice),v=r("".replace),x=r([].join),g=c&&!o((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),m=t.exports=function(t,e,n){"Symbol("===y(d(e),0,7)&&(e="["+v(d(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!a(t,"name")||s&&t.name!==e)&&(c?p(t,"name",{value:e,configurable:!0}):t.name=e),g&&n&&a(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?c&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(o){}var r=l(t);return a(r,"source")||(r.source=x(b,"string"==typeof e?e:"")),t};Function.prototype.toString=m((function(){return i(this)&&h(this).source||u(this)}),"toString")},"14d9":function(t,e,n){"use strict";var r=n("23e7"),o=n("7b0b"),i=n("07fa"),a=n("3a34"),c=n("3511"),s=n("d039"),u=s((function(){return 4294967297!==[].push.call({length:4294967296},1)})),f=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},l=u||!f();r({target:"Array",proto:!0,arity:1,forced:l},{push:function(t){var e=o(this),n=i(e),r=arguments.length;c(n+r);for(var s=0;s<r;s++)e[n]=arguments[s],n++;return a(e,n),n}})},1626:function(t,e,n){var r=n("8ea1"),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},"1a2d":function(t,e,n){var r=n("e330"),o=n("7b0b"),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},"1d80":function(t,e,n){var r=n("7234"),o=TypeError;t.exports=function(t){if(r(t))throw o("Can't call method on "+t);return t}},"23cb":function(t,e,n){var r=n("5926"),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},"23e7":function(t,e,n){var r=n("da84"),o=n("06cf").f,i=n("9112"),a=n("cb2d"),c=n("6374"),s=n("e893"),u=n("94ca");t.exports=function(t,e){var n,f,l,h,d,p,y=t.target,v=t.global,x=t.stat;if(f=v?r:x?r[y]||c(y,{}):(r[y]||{}).prototype,f)for(l in e){if(d=e[l],t.dontCallGetSet?(p=o(f,l),h=p&&p.value):h=f[l],n=u(v?l:y+(x?".":"#")+l,t.forced),!n&&void 0!==h){if(typeof d==typeof h)continue;s(d,h)}(t.sham||h&&h.sham)&&i(d,"sham",!0),a(f,l,d,t)}}},"241c":function(t,e,n){var r=n("ca84"),o=n("7839"),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"2ba4":function(t,e,n){var r=n("40d5"),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},"2d00":function(t,e,n){var r,o,i=n("da84"),a=n("342f"),c=i.process,s=i.Deno,u=c&&c.versions||s&&s.version,f=u&&u.v8;f&&(r=f.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),t.exports=o},"342f":function(t,e){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3511:function(t,e){var n=TypeError,r=9007199254740991;t.exports=function(t){if(t>r)throw n("Maximum allowed index exceeded");return t}},"3a34":function(t,e,n){"use strict";var r=n("83ab"),o=n("e8b5"),i=TypeError,a=Object.getOwnPropertyDescriptor,c=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=c?function(t,e){if(o(t)&&!a(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},"3a9b":function(t,e,n){var r=n("e330");t.exports=r({}.isPrototypeOf)},"3bbe":function(t,e,n){var r=n("1626"),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},"40d5":function(t,e,n){var r=n("d039");t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},"44ad":function(t,e,n){var r=n("e330"),o=n("d039"),i=n("c6b6"),a=Object,c=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?c(t,""):a(t)}:a},"485a":function(t,e,n){var r=n("c65b"),o=n("1626"),i=n("861d"),a=TypeError;t.exports=function(t,e){var n,c;if("string"===e&&o(n=t.toString)&&!i(c=r(n,t)))return c;if(o(n=t.valueOf)&&!i(c=r(n,t)))return c;if("string"!==e&&o(n=t.toString)&&!i(c=r(n,t)))return c;throw a("Can't convert object to primitive value")}},"4d64":function(t,e,n){var r=n("fc6a"),o=n("23cb"),i=n("07fa"),a=function(t){return function(e,n,a){var c,s=r(e),u=i(s),f=o(a,u);if(t&&n!=n){while(u>f)if(c=s[f++],c!=c)return!0}else for(;u>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"50c4":function(t,e,n){var r=n("5926"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},5692:function(t,e,n){var r=n("c430"),o=n("c6cd");(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(t,e,n){var r=n("d066"),o=n("e330"),i=n("241c"),a=n("7418"),c=n("825a"),s=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(c(t)),n=a.f;return n?s(e,n(t)):e}},"577e":function(t,e,n){var r=n("f5df"),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},5926:function(t,e,n){var r=n("b42e");t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},"59ed":function(t,e,n){var r=n("1626"),o=n("0d51"),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e77":function(t,e,n){var r=n("83ab"),o=n("1a2d"),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,c=o(i,"name"),s=c&&"something"===function(){}.name,u=c&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:c,PROPER:s,CONFIGURABLE:u}},"5f1b":function(t,e,n){},6374:function(t,e,n){var r=n("da84"),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},"69f3":function(t,e,n){var r,o,i,a=n("cdce"),c=n("da84"),s=n("861d"),u=n("9112"),f=n("1a2d"),l=n("c6cd"),h=n("f772"),d=n("d012"),p="Object already initialized",y=c.TypeError,v=c.WeakMap,x=function(t){return i(t)?o(t):r(t,{})},g=function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}};if(a||l.state){var b=l.state||(l.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw y(p);return e.facade=t,b.set(t,e),e},o=function(t){return b.get(t)||{}},i=function(t){return b.has(t)}}else{var m=h("state");d[m]=!0,r=function(t,e){if(f(t,m))throw y(p);return e.facade=t,u(t,m,e),e},o=function(t){return f(t,m)?t[m]:{}},i=function(t){return f(t,m)}}t.exports={set:r,get:o,has:i,enforce:x,getterFor:g}},"6f19":function(t,e,n){var r=n("9112"),o=n("0d26"),i=n("b980"),a=Error.captureStackTrace;t.exports=function(t,e,n,c){i&&(a?a(t,e):r(t,"stack",o(n,c)))}},7156:function(t,e,n){var r=n("1626"),o=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var a,c;return i&&r(a=e.constructor)&&a!==n&&o(c=a.prototype)&&c!==n.prototype&&i(t,c),t}},7234:function(t,e){t.exports=function(t){return null===t||void 0===t}},7282:function(t,e,n){var r=n("e330"),o=n("59ed");t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(i){}}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,e,n){var r=n("1d80"),o=Object;t.exports=function(t){return o(r(t))}},"825a":function(t,e,n){var r=n("861d"),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not an object")}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"861d":function(t,e,n){var r=n("1626"),o=n("8ea1"),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===i}:function(t){return"object"==typeof t?null!==t:r(t)}},8925:function(t,e,n){var r=n("e330"),o=n("1626"),i=n("c6cd"),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},"8ea1":function(t,e){var n="object"==typeof document&&document.all,r="undefined"==typeof n&&void 0!==n;t.exports={all:n,IS_HTMLDDA:r}},"90e3":function(t,e,n){var r=n("e330"),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},9112:function(t,e,n){var r=n("83ab"),o=n("9bf2"),i=n("5c6c");t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"94ca":function(t,e,n){var r=n("d039"),o=n("1626"),i=/#|\.prototype\./,a=function(t,e){var n=s[c(t)];return n==f||n!=u&&(o(e)?r(e):!!e)},c=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},"9bf2":function(t,e,n){var r=n("83ab"),o=n("0cfb"),i=n("aed9"),a=n("825a"),c=n("a04b"),s=TypeError,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",d="writable";e.f=r?i?function(t,e,n){if(a(t),e=c(e),a(n),"function"===typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var r=f(t,e);r&&r[d]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:l in n?n[l]:r[l],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(a(t),e=c(e),a(n),o)try{return u(t,e,n)}catch(r){}if("get"in n||"set"in n)throw s("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},a04b:function(t,e,n){var r=n("c04e"),o=n("d9b5");t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},ab36:function(t,e,n){var r=n("861d"),o=n("9112");t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},aeb0:function(t,e,n){var r=n("9bf2").f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},aed9:function(t,e,n){var r=n("83ab"),o=n("d039");t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b42e:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?r:n)(e)}},b622:function(t,e,n){var r=n("da84"),o=n("5692"),i=n("1a2d"),a=n("90e3"),c=n("04f8"),s=n("fdbf"),u=r.Symbol,f=o("wks"),l=s?u["for"]||u:u&&u.withoutSetter||a;t.exports=function(t){return i(f,t)||(f[t]=c&&i(u,t)?u[t]:l("Symbol."+t)),f[t]}},b980:function(t,e,n){var r=n("d039"),o=n("5c6c");t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},c04e:function(t,e,n){var r=n("c65b"),o=n("861d"),i=n("d9b5"),a=n("dc4a"),c=n("485a"),s=n("b622"),u=TypeError,f=s("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,s=a(t,f);if(s){if(void 0===e&&(e="default"),n=r(s,t,e),!o(n)||i(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},c430:function(t,e){t.exports=!1},c65b:function(t,e,n){var r=n("40d5"),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},c6b6:function(t,e,n){var r=n("e330"),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},c6cd:function(t,e,n){var r=n("da84"),o=n("6374"),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var r=n("e330"),o=n("1a2d"),i=n("fc6a"),a=n("4d64").indexOf,c=n("d012"),s=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,f=[];for(n in r)!o(c,n)&&o(r,n)&&s(f,n);while(e.length>u)o(r,n=e[u++])&&(~a(f,n)||s(f,n));return f}},cb2d:function(t,e,n){var r=n("1626"),o=n("9bf2"),i=n("13d2"),a=n("6374");t.exports=function(t,e,n,c){c||(c={});var s=c.enumerable,u=void 0!==c.name?c.name:e;if(r(n)&&i(n,u,c),c.global)s?t[e]=n:a(e,n);else{try{c.unsafe?t[e]&&(s=!0):delete t[e]}catch(f){}s?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},cc12:function(t,e,n){var r=n("da84"),o=n("861d"),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},cdce:function(t,e,n){var r=n("da84"),o=n("1626"),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("da84"),o=n("1626"),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("7282"),o=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(a){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},d9b5:function(t,e,n){var r=n("d066"),o=n("1626"),i=n("3a9b"),a=n("fdbf"),c=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,c(t))}},d9e2:function(t,e,n){var r=n("23e7"),o=n("da84"),i=n("2ba4"),a=n("e5cb"),c="WebAssembly",s=o[c],u=7!==Error("e",{cause:7}).cause,f=function(t,e){var n={};n[t]=a(t,e,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},l=function(t,e){if(s&&s[t]){var n={};n[t]=a(c+"."+t,e,u),r({target:c,stat:!0,constructor:!0,arity:1,forced:u},n)}};f("Error",(function(t){return function(e){return i(t,this,arguments)}})),f("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),f("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),f("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),f("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),f("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),f("URIError",(function(t){return function(e){return i(t,this,arguments)}})),l("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),l("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),l("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||this||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(t,e,n){var r=n("59ed"),o=n("7234");t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},e330:function(t,e,n){var r=n("40d5"),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?a:function(t){return function(){return i.apply(t,arguments)}}},e391:function(t,e,n){var r=n("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},e5cb:function(t,e,n){"use strict";var r=n("d066"),o=n("1a2d"),i=n("9112"),a=n("3a9b"),c=n("d2bb"),s=n("e893"),u=n("aeb0"),f=n("7156"),l=n("e391"),h=n("ab36"),d=n("6f19"),p=n("83ab"),y=n("c430");t.exports=function(t,e,n,v){var x="stackTraceLimit",g=v?2:1,b=t.split("."),m=b[b.length-1],w=r.apply(null,b);if(w){var P=w.prototype;if(!y&&o(P,"cause")&&delete P.cause,!n)return w;var S=r("Error"),O=e((function(t,e){var n=l(v?e:t,void 0),r=v?new w(t):new w;return void 0!==n&&i(r,"message",n),d(r,O,r.stack,2),this&&a(P,this)&&f(r,this,O),arguments.length>g&&h(r,arguments[g]),r}));if(O.prototype=P,"Error"!==m?c?c(O,S):s(O,S,{name:!0}):p&&x in w&&(u(O,w,x),u(O,w,"prepareStackTrace")),s(O,w),!y)try{P.name!==m&&i(P,"name",m),P.constructor=O}catch(j){}return O}}},e893:function(t,e,n){var r=n("1a2d"),o=n("56ef"),i=n("06cf"),a=n("9bf2");t.exports=function(t,e,n){for(var c=o(e),s=a.f,u=i.f,f=0;f<c.length;f++){var l=c[f];r(t,l)||n&&r(n,l)||s(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95d:function(t,e,n){"use strict";n("5f1b")},f5df:function(t,e,n){var r=n("00ee"),o=n("1626"),i=n("c6b6"),a=n("b622"),c=a("toStringTag"),s=Object,u="Arguments"==i(function(){return arguments}()),f=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=f(e=s(t),c))?n:u?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),o=n("90e3"),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},fb15:function(t,e,n){"use strict";if(n.r(e),n.d(e,"install",(function(){return m})),n.d(e,"PolygonDraw",(function(){})),"undefined"!==typeof window){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var i=function(){var t=this,e=t._self._c;return e("canvas",{ref:"canvas",class:t.cursorType,attrs:{tabindex:"0"},on:{mousemove:t.handleMouseMove,mouseup:t.handleMouseUp,mousedown:t.handleMouseDown,contextmenu:t.handleContextMenu,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.handleDelKeyUp.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.createCancel.apply(null,arguments)}]}})},a=[];n("d9e2"),n("14d9");function c(t,e,n,r){var o=(e.y-t.y)*(r.x-n.x)-(t.x-e.x)*(n.y-r.y);if(0==o)return!1;var i=((e.x-t.x)*(r.x-n.x)*(n.y-t.y)+(e.y-t.y)*(r.x-n.x)*t.x-(r.y-n.y)*(e.x-t.x)*n.x)/o,a=-((e.y-t.y)*(r.y-n.y)*(n.x-t.x)+(e.x-t.x)*(r.y-n.y)*t.y-(r.x-n.x)*(e.y-t.y)*n.y)/o;return(i-t.x)*(i-e.x)<0&&(a-t.y)*(a-e.y)<0&&(i-n.x)*(i-r.x)<0&&(a-n.y)*(a-r.y)<0}function s(t){let e=!1;if(t.length<3)return!1;for(let n=0;n<t.length;n++){let r,o=t[n];r=n==t.length-1?t[0]:t[n+1];for(let i=0;i<t.length-1;i++){if(n==i)continue;let a=t[i],s=t[i+1];if(e=c(o,r,a,s),e)return e}}return e}function u(t,e){return t.x*e.y-t.y*e.x}function f(t,e,n,r){let o={x:t.x-n.x,y:t.y-n.y},i={x:e.x-n.x,y:e.y-n.y},a={x:r.x-n.x,y:r.y-n.y},c=u(o,a)*u(i,a);return o={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y},a={x:e.x-t.x,y:e.y-t.y},c<=0&&u(o,a)*u(i,a)<=0}function l(t,e){let n,r,o,i;n=t,r={x:-100,y:t.y};let a=0;for(let c=0;c<e.length-1;c++)o=e[c],i=e[c+1],1==f(n,r,o,i)&&a++;return o=e[e.length-1],i=e[0],1==f(n,r,o,i)&&a++,a%2!=0}function h(t,e,n){let r=t.x-e.x,o=t.y-e.y;return r*r+o*o<=n*n}function d(t){let e=0,n=0;for(let r=0;r<t.length;r++)e+=+t[r].x,n+=+t[r].y;return e/=t.length,n/=t.length,{x:e,y:n}}function p(t){function e(t){return("object"===typeof t||"function"===typeof t)&&null!==t}if(!e(t))throw new Error("obj 不是一个对象！");let n=Array.isArray(t),r=n?[]:{};for(let o in t)r[o]=e(t[o])?p(t[o]):t[o];return r}var y={name:"PolygonDraw",emits:["created","create-failed","changed","del","error","selected"],data(){return{ctx:"",can:"",mode:"",debug:!1,title:"",color:"black",points:[],lastPoint:{},dragBeginMousePoint:null,shiftArea:null,shiftBeginPoints:null,vertexDragArea:null,vertexDragBeginPoint:null,vertexDragPointIndex:null,vertexR:8,selectedArea:null,cursorType:"normal-cursor"}},mounted(){for(let t=0;t<this.areas.length;t++)this.areas[t].index=t;this.initCanvas(),this.refresh()},props:["areas"],watch:{},methods:{drawTitle(t,e){this.ctx.font="20px 宋体",this.ctx.fillStyle=e.color;let n=d(e.points);t.fillText(e.index+1+"."+e.title,n.x-40,n.y)},drawVertex(t,e,n){t.beginPath(),t.arc(e.x,e.y,this.vertexR,0,2*Math.PI),t.strokeStyle=n,t.closePath(),t.fill(),t.stroke()},drawArea(t,e){let n=e.points;if(n.length>1){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)t.lineTo(n[e].x,n[e].y);t.strokeStyle=e.color,this.selectedArea==e?t.fillStyle="rgba(161,0,0,0.5)":t.fillStyle="rgba(161,195,255,0.5)",t.closePath(),t.fill(),t.stroke(),this.drawVertex(t,n[0],e.color);for(let r=1;r<n.length;r++)this.drawVertex(t,n[r],e.color)}this.drawTitle(t,e)},clearCanvas(t){var e=t.width,n=t.height;t.width=e,t.height=n},refresh(){this.can.width=this.$refs["canvas"].clientWidth,this.can.height=this.$refs["canvas"].clientHeight,this.clearCanvas(this.can);for(let t=0;t<this.areas.length;t++)this.drawArea(this.ctx,this.areas[t]);if("create"===this.mode&&this.points.length>0){let t=[].concat(this.points);t.push(this.lastPoint),this.drawArea(this.ctx,{index:this.areas.length,title:this.title,color:this.color,points:t})}},initCanvas(){this.can=this.$refs["canvas"],this.can.width=this.$refs["canvas"].clientWidth,this.can.height=this.$refs["canvas"].clientHeight,this.ctx=this.can.getContext("2d"),this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle="rgba(64, 158, 255,0.1)",this.ctx.lineWidth=4,this.ctx.globalAlpha=.7},select(t){t!=this.selectedArea&&(this.selectedArea=t,this.$emit("selected",t),this.refresh())},create(t="area 1",e="black"){this.title=t,this.color=e,this.setMode("create"),this.select(null)},createCancel(){"create"===this.mode&&(this.setMode(""),this.title="",this.points=[],this.refresh())},createFinish(){if("create"===this.mode){if(this.setMode(""),this.points.length<3){let t="多边形顶点不能小于3个";this.$emit("create-failed",t)}else if(s(this.points)){let t="存在交叉线段，请重新绘制";this.$emit("create-failed",t)}else{let t={index:this.areas.length,title:this.title,color:this.color,points:this.points};this.areas.push(t),this.$emit("created",t),this.select(t)}this.title="",this.points=[]}},handleMouseUp(t){if("shift"===this.mode){let e={x:t.offsetX,y:t.offsetY};e.x==this.dragBeginMousePoint.x&&e.y==this.dragBeginMousePoint.y||this.$emit("changed",this.shiftArea),this.setMode(""),this.shiftArea=null,this.dragBeginMousePoint=null}else"vertexDrag"===this.mode&&(s(this.vertexDragArea.points)?(this.vertexDragArea.points[this.vertexDragPointIndex]=this.vertexDragBeginPoint,this.refresh(),this.$emit("error","存在交叉线段，操作取消")):this.$emit("changed",this.vertexDragArea),this.setMode(""),this.vertexDragArea=null,this.vertexDragBeginPoint=null,this.vertexDragPointIndex=null)},handleMouseDown(t){if("create"===this.mode){let e={x:t.offsetX,y:t.offsetY};return this.points.push(e),2==t.buttons&&this.createFinish(),void this.refresh()}if(""===this.mode){let e={x:t.offsetX,y:t.offsetY},n=!1;for(let t=0;t<this.areas.length;t++){let r=this.areas[t].points;for(let o=0;o<r.length;o++)if(h(e,r[o],this.vertexR)){this.setMode("vertexDrag"),this.vertexDragArea=this.areas[t],this.vertexDragBeginPoint=p(r[o]),this.vertexDragPointIndex=o,this.dragBeginMousePoint=e,n=!0;break}if(!n&&l(e,r)&&(this.setMode("shift"),this.shiftArea=this.areas[t],this.shiftBeginPoints=p(this.areas[t].points),this.dragBeginMousePoint=e,n=!0),n)return this.select(this.areas[t]),void this.refresh()}}""===this.mode&&this.selectedArea&&this.select(null)},handleMouseMove(t){if("create"===this.mode)this.lastPoint={x:t.offsetX,y:t.offsetY},this.refresh();else if("shift"===this.mode){let e=t.offsetX-this.dragBeginMousePoint.x,n=t.offsetY-this.dragBeginMousePoint.y;for(let r=0;r<this.shiftBeginPoints.length;r++)if(this.shiftBeginPoints[r].x+e>=this.can.width||this.shiftBeginPoints[r].x+e<=0||this.shiftBeginPoints[r].y+n>=this.can.height||this.shiftBeginPoints[r].y+n<=0)return void t.preventDefault();for(let t=0;t<this.shiftBeginPoints.length;t++)this.shiftArea.points[t].x=this.shiftBeginPoints[t].x+e,this.shiftArea.points[t].y=this.shiftBeginPoints[t].y+n;this.refresh()}else if("vertexDrag"===this.mode){let e=t.offsetX-this.dragBeginMousePoint.x,n=t.offsetY-this.dragBeginMousePoint.y;if(this.vertexDragBeginPoint.x+e>=this.can.width||this.vertexDragBeginPoint.x+e<=0||this.vertexDragBeginPoint.y+n>=this.can.height||this.vertexDragBeginPoint.y+n<=0)return void t.preventDefault();this.vertexDragArea.points[this.vertexDragPointIndex].x=this.vertexDragBeginPoint.x+e,this.vertexDragArea.points[this.vertexDragPointIndex].y=this.vertexDragBeginPoint.y+n,this.refresh()}},handleContextMenu(t){return t.preventDefault(),!1},del(t){this.$emit("del",t),this.areas.splice(t.index,1),this.select(null)},handleDelKeyUp(){this.selectedArea&&this.del(this.selectedArea)},setMode(t){this.mode!==t&&(this.mode=t,"shift"===this.mode?this.cursorType="shift-cursor":"create"===this.mode||"vertexDrag"===this.mode?this.cursorType="draw-cursor":this.cursorType="normal-cursor")}},computed:{}},v=y;n("e95d");function x(t,e,n,r,o,i,a,c){var s,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=s):o&&(s=c?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(u.functional){u._injectStyles=s;var f=u.render;u.render=function(t,e){return s.call(e),f(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,s):[s]}return{exports:t,options:u}}var g=x(v,i,a,!1,null,"0c4b5cda",null);g.exports;(void 0).install=t=>{t.component((void 0).name,void 0)};const b=[void 0],m=function(t){if(m.installed)return m.installed=!0;b.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&m(window.Vue);var w={install:m,PolygonDraw:void 0};e["default"]=w},fc6a:function(t,e,n){var r=n("44ad"),o=n("1d80");t.exports=function(t){return r(o(t))}},fdbf:function(t,e,n){var r=n("04f8");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}));
//# sourceMappingURL=polygon-draw.umd.min.js.map